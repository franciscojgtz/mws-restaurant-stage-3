"use strict";function notifySWUpdates(e){console.log("There is a new Service Worker available");var t=document.createElement("button");t.classList.add("sw-button"),t.innerHTML="Update Available",document.getElementsByTagName("body")[0].appendChild(t),t.addEventListener("click",function(){e.postMessage({activate:"true"})})}function trackSWStates(e){var t=this;e.addEventListener("statechange",function(){"installed"===t.state&&notifySWUpdates(e)})}function registerServiceWorker(){navigator.serviceWorker.register("sw.js").then(function(e){if(navigator.serviceWorker.controller){e.waiting&&notifySWUpdates(e.waiting),e.installing&&trackSWStates(e.installing),e.addEventListener("updatefound",function(){trackSWStates(e.installing)});var t=void 0;navigator.serviceWorker.addEventListener("controllerchange",function(){t||(window.location.reload(),t=!0)})}}).catch(function(e){console.log("SW failed: ",e)})}registerServiceWorker();