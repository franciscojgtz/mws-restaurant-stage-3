"use strict";var restaurant=void 0,newMap=void 0;document.addEventListener("DOMContentLoaded",function(e){window.initMap()});var initMap=function(){fetchRestaurantFromURL(function(e,n){e?console.error(e):(self.newMap=L.map("map",{center:[n.latlng.lat,n.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiZnJhbmNpc2Nvamd0eiIsImEiOiJjamlzOHRncjEwbHU4M3ByeTdpenN5M3YwIn0.y1U7z4RQa0J58bhLtiYlqg",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),setTimeout(function(){newMap.invalidateSize()},400),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})},fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(fillRestaurantHTML(),t(null,n)):console.error(e)}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address,e.photograph&&createResponsiveImage(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById("restaurant-hours");for(var t in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=t,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[t],r.appendChild(i),n.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container"),t=document.createElement("h3");if(t.innerHTML="Reviews",n.appendChild(t),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void n.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),n.appendChild(a)},createReviewHTML=function(e){var n=document.createElement("li"),t=document.createElement("p");t.innerHTML=e.name,n.appendChild(t);var r=document.createElement("p");r.innerHTML=e.date,n.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,n.appendChild(a);var i=document.createElement("p");return i.innerHTML=e.comments,n.appendChild(i),n},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb"),t=document.createElement("li");t.innerHTML=e.name,n.appendChild(t)},getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};function getPhotoDescription(e){switch(parseInt(e)){case 1:return"classical indoor decoration";case 2:return"hand-made cheese pizza";case 3:return"modern dining atmosphere";case 4:return"colorful and dynamic entrance";case 5:return"popular friendly environment";case 6:return"patriotic and popular diner";case 7:return"cozy welcoming entrance";case 8:return"daytime clean entrance";case 9:return"customers enjoying their meal";case 10:return"very clean modern-mexican environment";default:return"error"}}function createResponsiveImage(e){var n=document.getElementById("restaurant-img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.alt=e.name+" restaurant, "+getPhotoDescription(e.photograph);var t=DBHelper.imageUrlForRestaurant(e).slice(0,-4);n.srcset=t+"_300.webp 300w, "+t+"_350.webp 350w, "+t+"_400.webp 400w, "+t+"_450.webp 450w, "+t+"_500.webp 500w, "+t+"_550.webp 550w, "+t+"_600.webp 600w, "+t+"_700.webp 700w, "+t+"_800.webp 800w",n.sizes="(max-width: 779px) calc(100vw - 4rem), (min-width: 800px) and (max-width: 1023px) calc(60vw - 4rem), (min-width: 1024px) calc(50vw - 4rem), (min-width: 1600px) 760px, calc(100vw - 4rem)"}